{% extends "shopify/base.html" %}
{% block title %}Mes Commandes - Shopify{% endblock %}
{% block content %}
<section class="orders-page">
    <div class="container">
        <h1 class="page-title">Mes Commandes</h1>
        {% if orders %}
            <div class="orders-list">
                {% for order in orders %}
                    <div class="order-card">
                        <div class="order-header">
                            <div>
                                <h3>Commande #{{ order.id }}</h3>
                                <p>{{ order.created_at.strftime('%d/%m/%Y à %H:%M') }}</p>
                            </div>
                            <span class="order-status status-{{ order.status.value }}">{{ order.status.value }}</span>
                        </div>
                        <div class="order-items">
                            {% for item in order.items %}
                                <div class="order-item">
                                    <img src="{{ item.product_image }}" alt="{{ item.product_name }}">
                                    <div>
                                        <p>{{ item.product_name }}</p>
                                        <small>Qté: {{ item.quantity }} × {{ "%.2f"|format(item.product_price) }} €</small>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                        <div class="order-footer">
                            <span>Total: <strong>{{ "%.2f"|format(order.total) }} €</strong></span>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <div class="empty-state">
                <i class="fas fa-box"></i>
                <h3>Aucune commande</h3>
                <p>Vous n'avez pas encore passé de commande</p>
                <a href="{{ url_for('products') }}" class="btn-secondary-large">Découvrir nos produits</a>
            </div>
        {% endif %}
    </div>
</section>
<style>
.orders-page { padding: 3rem 0; min-height: 60vh; }
.orders-list { display: flex; flex-direction: column; gap: 1.5rem; }
.order-card { background: white; padding: 2rem; border-radius: 16px; box-shadow: var(--shadow); }
.order-header { display: flex; justify-content: space-between; align-items: start; margin-bottom: 1.5rem; padding-bottom: 1rem; border-bottom: 2px solid var(--border-color); }
.order-header h3 { font-size: 1.25rem; margin-bottom: 0.25rem; }
.order-status { padding: 0.5rem 1rem; border-radius: 20px; font-size: 0.85rem; font-weight: 600; }
.status-paid { background: #d1fae5; color: #065f46; }
.status-shipped { background: #dbeafe; color: #1e40af; }
.status-delivered { background: #d1fae5; color: #065f46; }
.order-items { display: flex; flex-direction: column; gap: 1rem; margin-bottom: 1rem; }
.order-item { display: flex; align-items: center; gap: 1rem; }
.order-item img { width: 60px; height: 60px; object-fit: cover; border-radius: 8px; }
.order-footer { padding-top: 1rem; border-top: 1px solid var(--border-color); text-align: right; font-size: 1.1rem; }
</style>
{% endblock %}

